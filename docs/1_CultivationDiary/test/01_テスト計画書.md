# テスト計画書

## 1. テスト方針
- ユーザーストーリー・ユースケース・機能要件に基づき、単体テスト・結合テスト・E2Eテストを実施
- ペルソナごとの利用シナリオを重視し、ユーザー体験・アクセシビリティも検証対象とする
- バグ再発防止のため、回帰テストも自動化を推進
- 本計画書はテスト全体の方針・戦略を示すものであり、個別機能の詳細なテスト設計は別途「テスト設計書」として管理する

## 2. テストの責務
### 単体テスト（Unit Test）
- 各関数・クラス・コンポーネントなど最小単位のロジックが仕様通り動作することを検証
- バリデーション、計算処理、UIコンポーネントの単独動作など
- バグの早期発見・局所的な品質担保が目的

### 結合テスト（Integration Test）
- 複数のモジュールやコンポーネント、APIとDBなどの連携部分が正しく動作することを検証
- 画面とAPI、APIとDB、外部サービス連携など
- インターフェースの整合性やデータフローの正当性を担保

### E2Eテスト（End-to-End Test）
- ユーザーの操作フロー全体（画面遷移・入力・出力）が期待通りに動作することを検証
- 実際のブラウザやデバイス上で、主要ユースケース・シナリオを自動化
- システム全体の品質・ユーザー体験を担保

## 3. アクセシビリティ要件（WCAG基準）について
- 初期開発の時点で**満たすことが望ましい**。
- **理由:**
    - サービス公開後の大幅なUI改修コストを抑制できる
    - 高齢者・障害者を含む幅広いユーザー層の利用を妨げない
    - 法令順守（日本の障害者差別解消法、欧州・米国のアクセシビリティ法規制）リスクを低減
    - 早期からアクセシビリティを考慮することで、設計・実装・テストの全工程で品質を高めやすい
- ただし、MVP段階では「最低限の達成基準（WCAG 2.1 A/AA）」を優先し、段階的に改善していくアプローチも現実的

## 4. テスト観点
- 画面表示・遷移
- 入力バリデーション
- APIリクエスト・レスポンス
- 権限制御・認証
- エラーハンドリング
- レスポンシブ・アクセシビリティ
- 画像アップロード・圧縮
- 通知・リマインダー
- データエクスポート・インポート
- パフォーマンス・負荷（快適なレスポンス、画像アップロードの高速化等）

## 5. テストケース管理・結果管理
- テストケースは**Markdownファイル**（本計画書および各機能ごとのテスト設計書）で管理
- テスト実行結果・レポートは**AllureReport**で管理し、可視化・履歴管理を徹底
- テストケースが増加した場合や長期運用時は、TestRailやJira等のTCMツール導入も検討

## 6. テストデータ管理
- テストケースごとに必要なテストデータ（例：正しい/誤った認証情報、権限別ユーザー等）を整理
- テストデータの生成・保管・クリーンアップ方針は別途ドキュメント化予定

## 7. テスト環境
- 単体テスト：ローカル開発環境、CI環境
- 結合テスト：開発環境、ステージング環境
- E2Eテスト：ステージング環境、本番同等環境
- パフォーマンステスト：ステージング環境、必要に応じて本番同等環境

## 8. テストケース例（参考）

| No | テスト対象      | テスト観点(確認内容)         | テスト条件                | テスト手順                           | 期待値                     |
|----|----------------|-----------------------------|---------------------------|--------------------------------------|----------------------------|
| 1  | ログイン画面   | 正常ログイン                 | 正しい認証情報を入力      | ログイン画面でID/パスワード入力→ログインボタン押下 | ダッシュボードに遷移       |
| 2  | ログイン画面   | 異常ログイン                 | 誤った認証情報を入力      | ログイン画面で誤ったID/パスワード入力→ログインボタン押下 | エラーメッセージ表示       |
| 3  | 作物登録画面   | 必須項目バリデーション       | 必須項目未入力            | 作物登録画面で必須項目を空欄のまま登録ボタン押下 | バリデーションエラー表示   |
| 4  | 栽培記録追加   | 画像アップロード             | 画像ファイルを選択        | 栽培記録追加画面で画像選択→登録ボタン押下 | タイムラインに画像付きで反映 |
| 5  | 栽培記録編集   | 権限制御                     | 他ユーザーの記録を編集    | 他ユーザーの記録詳細画面で編集ボタン押下 | 権限エラー表示             |
| 6  | データエクスポート | CSV出力                     | データが存在する          | エクスポート画面でCSV出力ボタン押下   | CSVファイルがダウンロード  |
| 7  | 通知機能       | リマインダー通知             | リマインダー設定済み      | 設定時刻になるのを待つ                | 通知が表示される           |
| 8  | 全画面         | アクセシビリティ（キーボード操作） | マウス未使用              | キーボードのみで主要機能を操作        | すべて操作できる           |

## 9. 受入基準
- 主要ユースケースの正常系・異常系がすべて通過
- ペルソナごとのシナリオで致命的なUX障害がない
- アクセシビリティ要件（WCAG基準）を満たす
- 重大なセキュリティ・プライバシーリスクがない

## 10. テスト実施・管理方法
- 単体テスト：フロントエンド (Jest, Testing Library等), バックエンド (pytest, unittest等) で自動化
- E2Eテスト：Playwright, Cypress等で主要フローを自動化
- テストケース・結果管理：Markdownファイルでテストケース管理、AllureReportで結果管理
- バグ・改善要望はIssue管理システムでトラッキング

---
必要に応じてテストケースを追加・詳細化してください。
