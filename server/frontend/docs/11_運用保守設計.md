# 運用・保守設計

---

## 1. データバックアップ・リストア
- **優先度: 最重要**
- **理由:** サービス継続性・信頼性の根幹。障害時の迅速な復旧（RTO短縮）とデータ損失最小化（RPO低減）が最重要。
- **バックアップ対象**: ユーザーデータ、作物・記録データ、画像ファイル、設定情報（例: アプリ設定ファイル、環境変数、Webサーバー設定等）
- **バックアップ方法**: クラウドストレージ（S3等）への定期自動バックアップ（DB・画像）
- **頻度・世代管理**: 1日1回、直近7世代保持（RPO観点で重要データは増分/リアルタイムも検討）
- **リストア手順**: 管理者による手動リストア手順に加え、主要障害シナリオは自動リストアスクリプトを整備し迅速な復旧を目指す。自動化手順は定期的にテスト・検証。
- **責任範囲**: 運用管理者が定期監査・検証（例: バックアップからのリストアテスト、整合性チェック）を実施
- **RTO/RPO**: RTO（目標復旧時間）、RPO（目標復旧時点）を明確化し、運用設計に反映

## 2. 障害・インシデント対応
- **優先度: 非常に高い**
- **理由:** サービス停止やデータ損失の影響を最小化し、再発防止・運用改善につなげるため。
- **障害検知**: サーバー監視（死活監視・リソース監視・API監視・主要指標）
- **通知方法**: 管理者へのメール・チャット通知、ユーザー向け障害情報ページ
- **復旧手順**: 障害内容ごとに復旧フローを整備。自動リストアスクリプトや自動化手順の実行も含む
- **連絡体制**: 管理者・開発者の緊急連絡網、エスカレーションマトリックス（L1→L2→L3）を明確化
- **インシデント後対応**: 事後検証（ポストモーテム）を必須化し、根本原因分析・再発防止策・知識共有を実施

## 3. ログ・監査
- **優先度: 高い**
- **理由:** セキュリティ・運用監査・トラブルシュート・法令順守のため不可欠。
- **ログ種別**: アクセスログ、操作ログ、エラーログ、認証ログ
- **保存期間**: 90日間（法令・運用要件・調査期間に応じて調整）
- **監査体制**: 管理者のみ閲覧可能。定期的な不正アクセス・異常操作の監査
- **ログ管理方法**: クラウドログサービス（CloudWatch, Datadog, Google Cloud Logging等）やDB保存

## 4. 監視体制
- **優先度: 高い**
- **理由:** 障害の早期発見・予防保守・運用負荷軽減のため。
- **監視指標例**: CPU/メモリ/ディスクI/O/ネットワーク/DB応答時間/APIエラーレート/レイテンシ
- **監視方法**: 自動監視ツールで閾値超過時にアラート通知

## 5. サポート・ヘルプ機能
- **優先度: 中**
- **理由:** ユーザー満足度・運用負荷低減に直結。
- **FAQ・ガイド**: よくある質問、操作ガイド、トラブルシューティングをWeb上で充実させ、自己解決率向上
- **問い合わせフォーム**: サービス内に設置。ユーザーからの質問・要望を受付
- **サポート導線**: 画面右下のヘルプボタン、サポートページへのリンク

## 6. ユーザーサポート・フィードバック受付
- **優先度: 中**
- **理由:** サービス品質向上・ユーザー価値最大化のため。
- **問い合わせ対応フロー**: 受付→自動返信→担当者対応→回答・対応履歴管理
- **フィードバック収集**: サービス改善要望・バグ報告フォーム、アンケート機能やNPS調査も検討。定期的に集計・改善に反映

## 7. 運用体制・権限分担
- **優先度: 中**
- **理由:** 安定運用・情報漏洩防止・効率化の基盤。
- **管理者権限**: データ管理、ユーザー管理、障害対応、設定変更
- **運用担当**: 日常監視、サポート対応、FAQ更新
- **権限管理**: 管理者・運用担当の権限・利用ツール・アクセス権限を明確化し、操作ログで監査

## 8. 保守性・拡張性への配慮
- **優先度: 中**
- **理由:** 長期的な運用コスト削減・サービス成長対応。
- **CI/CD導入**: GitHub Actions等で自動テスト・自動デプロイ
- **監視体制**: サーバー・API・ストレージの監視を自動化
- **運用自動化ツール例**: ログ分析ツール、アラート管理ツール、インフラ自動プロビジョニングツール等
- **将来の運用負荷低減策**: ドキュメント整備、運用マニュアル、運用自動化ツールの導入

---

必要に応じて運用フロー図・障害対応マニュアル・FAQサンプル等も追加可能。
